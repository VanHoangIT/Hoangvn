{% extends "base.html" %}

{% block title %}{{ project.title }} - Dự án tiêu biểu - {{ config.SITE_NAME }}{% endblock %}

{% block content %}
<!-- Breadcrumb -->
<section class="breadcrumb-section py-4 bg-light">
    <div class="container">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item"><a href="{{ url_for('main.index') }}">Trang chủ</a></li>
                <li class="breadcrumb-item"><a href="{{ url_for('main.projects') }}">Dự án tiêu biểu</a></li>
                <li class="breadcrumb-item active">{{ project.title }}</li>
            </ol>
        </nav>
    </div>
</section>

<!-- Project Detail -->
<section class="project-detail py-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <!-- Main Image -->
                <div class="card border-0 shadow-sm mb-4">
                    <img src="{{ project.image or '/static/img/placeholder.jpg' }}" 
                         class="card-img-top" 
                         alt="{{ project.title }}"
                         style="max-height: 500px; object-fit: cover;">
                </div>

                <!-- Project Info -->
                <div class="card border-0 shadow-sm mb-4">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-start mb-3">
                            <div>
                                <h1 class="h2 mb-2">{{ project.title }}</h1>
                                <p class="text-muted mb-0">
                                    <i class="bi bi-geo-alt"></i> {{ project.location }}
                                    {% if project.year %}
                                    | <i class="bi bi-calendar"></i> {{ project.year }}
                                    {% endif %}
                                    | <i class="bi bi-eye"></i> {{ project.view_count }} lượt xem
                                </p>
                            </div>
                            {% if project.is_featured %}
                            <span class="badge bg-warning">
                                <i class="bi bi-star-fill"></i> Nổi bật
                            </span>
                            {% endif %}
                        </div>

                        {% if project.description %}
                        <div class="alert alert-info">
                            <i class="bi bi-info-circle"></i> {{ project.description }}
                        </div>
                        {% endif %}

                        <div class="project-content mt-4">
                            {{ project.content|safe }}
                        </div>
                    </div>
                </div>

                <!-- Related Projects -->
                {% if related %}
                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title mb-3">Dự án liên quan</h5>
                        <div class="row g-3">
                            {% for rel in related %}
                            <div class="col-md-6">
                                <div class="card h-100 border">
                                    <div class="row g-0">
                                        <div class="col-4">
                                            <img src="{{ rel.image or '/static/img/placeholder.jpg' }}" 
                                                 class="img-fluid h-100" 
                                                 style="object-fit: cover;"
                                                 alt="{{ rel.title }}">
                                        </div>
                                        <div class="col-8">
                                            <div class="card-body p-2">
                                                <h6 class="card-title mb-1">
                                                    <a href="{{ url_for('main.project_detail', slug=rel.slug) }}" 
                                                       class="text-decoration-none text-dark">
                                                        {{ rel.title }}
                                                    </a>
                                                </h6>
                                                <p class="card-text small text-muted mb-0">
                                                    <i class="bi bi-geo-alt"></i> {{ rel.location }}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>

            <!-- Sidebar -->
            <div class="col-lg-4">
                <!-- Project Info Card -->
                <div class="card border-0 shadow-sm mb-4">
                    <div class="card-header bg-warning">
                        <h5 class="mb-0"><i class="bi bi-info-circle"></i> Thông tin dự án</h5>
                    </div>
                    <div class="card-body">
                        <table class="table table-sm table-borderless mb-0">
                            {% if project.client %}
                            <tr>
                                <td class="text-muted"><i class="bi bi-building"></i> Khách hàng:</td>
                                <td><strong>{{ project.client }}</strong></td>
                            </tr>
                            {% endif %}
                            <tr>
                                <td class="text-muted"><i class="bi bi-geo-alt"></i> Địa điểm:</td>
                                <td><strong>{{ project.location }}</strong></td>
                            </tr>
                            {% if project.year %}
                            <tr>
                                <td class="text-muted"><i class="bi bi-calendar"></i> Năm:</td>
                                <td><strong>{{ project.year }}</strong></td>
                            </tr>
                            {% endif %}
                            <tr>
                                <td class="text-muted"><i class="bi bi-tag"></i> Loại:</td>
                                <td><span class="badge bg-secondary">{{ project.project_type }}</span></td>
                            </tr>
                            {% if project.area %}
                            <tr>
                                <td class="text-muted"><i class="bi bi-arrows-angle-expand"></i> Diện tích:</td>
                                <td><strong>{{ project.area }}</strong></td>
                            </tr>
                            {% endif %}
                        </table>

                        {% if project.products_used %}
                        <hr>
                        <h6 class="mb-2"><i class="bi bi-box-seam"></i> Sản phẩm sử dụng:</h6>
                        <p class="small text-muted mb-0">{{ project.products_used }}</p>
                        {% endif %}
                    </div>
                    <div class="card-footer bg-white">
                        <a href="{{ url_for('main.contact') }}" class="btn btn-warning w-100">
                            <i class="bi bi-envelope"></i> Liên hệ tư vấn
                        </a>
                    </div>
                </div>

                <!-- CTA Card -->
                <div class="card border-0 shadow-sm bg-light">
                    <div class="card-body text-center">
                        <h5 class="card-title">Bạn có dự án tương tự?</h5>
                        <p class="card-text small text-muted">
                            Liên hệ với chúng tôi để được tư vấn giải pháp phù hợp nhất
                        </p>
                        <a href="{{ url_for('main.contact') }}" class="btn btn-warning">
                            <i class="bi bi-telephone"></i> Liên hệ ngay
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}